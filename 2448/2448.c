#include <stdio.h>
#include <stdlib.h> //malloc, free 함수.
#include <string.h> //memset 함수.

// 별을 그릴 도화지 역할을 하는 2차원 배열이다.
// 포인터의 포인터(char**)를 쓰는 이유는, 도화지 크기를 입력받은 후에 정해야한다.
char** arr;

//재귀적으로 삼각형을 그리는 함수다.
//y, x: 현재 그리려는 삼각형의 가장 위쪽 꼭짓점의 좌표 (y는 행, x는 열)
//n: 현재 그리려는 삼각형의 높이
void solve(int y, int x, int n) {
    //가장 작은 삼각형(n = 3)을 그릴 차례가 되면, 직접 별을 찍는다.
	if (n == 3) {
		arr[y][x] = '*'; //꼭대기
		arr[y + 1][x - 1] = '*'; //왼쪽 아래
		arr[y + 1][x + 1] = '*'; //오른쪽 아래
		//마지막 줄은 별 5개를 쭉 찍는다.
		arr[y + 2][x - 2] = '*';
		arr[y + 2][x - 1] = '*';
		arr[y + 2][x] = '*';
		arr[y + 2][x + 1] = '*';
		arr[y + 2][x + 2] = '*';
		return;
	}

    //현재 삼각형이 n=3 보다 크면, 더 작은 삼각형 3개로 쪼개서 그린다.
    int next_n = n / 2; //다음에 그릴 삼각형의 높이는 현재의 절반이다.

	solve(y, x, next_n); //1. 위쪽에 작은 삼각형을 그린다.
	solve(y + next_n, x - next_n, next_n); //2. 왼쪽 아래에 작은 삼각형을 그린다.
	solve(y + next_n, x + next_n, next_n); //3. 오른쪽 아래에 작은 삼각형을 그린다.
}

int main() {
	int n; //삼각형의 높이를 입력받을 변수.
	scanf("%d", &n);

    //도화지(2차원 배열)를 준비해요. C언어에서는 이렇게 동적으로 메모리를 할당한다.
	arr = (char**)malloc(sizeof(char*) * n);
	for (int i = 0; i < n; i++) {
        //각 줄마다 너비가 2n 만큼인 공간을 빌린다.
		arr[i] = (char*)malloc(sizeof(char) * (2 * n));
        //도화지를 깨끗한 상태(공백)로 만든다.
		memset(arr[i], ' ', sizeof(char) * (2 * n - 1));
        arr[i][2 * n - 1] = '\0'; //문자열 끝.
	}

    //처음으로 함수를 호출하여 가장 큰 삼각형을 그린다. 가장 위 꼭짓점의 좌표는 (0, n-1)이 된다.
	solve(0, n - 1, n);
    //다 그려진 도화지를 한 줄씩 출력한다.
	for (int i = 0; i < n; i++) {
		printf("%s\n", arr[i]);
	}
    //빌렸던 도화지(메모리)는 다 썼으니 반납한다. (메모리 누수 방지)
	for (int i = 0; i < n; i++) {
		free(arr[i]); //각 줄을 반납.
	}
	free(arr); //도화지 전체를 반납.
	return 0;
}

/*
재귀는 "어떤 문제를 해결하기 위해, 그 문제와 똑같은 형태지만 크기만 더 작은 문제를 푸는 방법"이에요. 마치 러시아
  인형(마트료시카)처럼 큰 인형을 열면 그 안에 똑같이 생긴 작은 인형이 있고, 그걸 또 열면 더 작은 인형이 계속 나오는 것과
  같아요.

  이 문제에서 별 찍기는 다음과 같은 규칙이 있어요.

   1. 가장 작은 삼각형 (기본 인형): 높이가 3일 때의 삼각형이 가장 기본이 되는 모양이에요. 더 이상 쪼갤 수 없죠. 이걸 '기저 
      조건(Base Case)'이라고 불러요.

   1       *
   2      * *
   3     *****

   2. 더 큰 삼각형 (큰 인형): 높이가 N인 삼각형은, 높이가 N/2인 작은 삼각형 3개를 합쳐서 만들 수 있어요.
       * 작은 삼각형 하나는 위에,
       * 나머지 두 개는 아래쪽 왼쪽과 오른쪽에 놓여요.

      이것처럼 자기 자신(삼각형 그리기)을 다시 호출해서 문제를 해결하는 부분을 '재귀 단계(Recursive Step)'라고 해요.

  코드 실행 순서 요약

   1. `main` 함수: 사용자에게 삼각형 높이 n을 입력받아요.
   2. 도화지 준비: n 크기에 맞는 2차원 배열(도화지)을 만들고 전부 공백으로 채워요.
   3. `solve` 함수 최초 호출: main 함수가 solve(0, n-1, n)을 부르며 "가장 큰 삼각형을 그려줘!"라고 명령해요.
   4. `solve` 함수의 재귀 호출:
       * solve 함수는 "내가 그릴 삼각형이 3보다 큰가?" 확인해요.
       * 크다면, 자기보다 작은 solve 함수 3개를 호출해요 (위, 왼쪽 아래, 오른쪽 아래).
       * 이 과정이 반복되다가 n이 3이 되면, 진짜 별을 찍기 시작해요.
   5. 그림 완성 및 출력: 모든 재귀 호출이 끝나면 도화지에 그림이 완성되고, main 함수가 이걸 화면에 출력해요.
   6. 메모리 반납: 다 쓴 도화지를 컴퓨터에게 돌려주고 프로그램을 끝내요.

   24
                       *                       
                      * *                      
                     *****                     
                    *     *                    
                   * *   * *                   
                  ***** *****                  
                 *           *                 
                * *         * *                
               *****       *****               
              *     *     *     *              
             * *   * *   * *   * *             
            ***** ***** ***** *****            
           *                       *           
          * *                     * *          
         *****                   *****         
        *     *                 *     *        
       * *   * *               * *   * *       
      ***** *****             ***** *****      
     *           *           *           *     
    * *         * *         * *         * *    
   *****       *****       *****       *****   
  *     *     *     *     *     *     *     *  
 * *   * *   * *   * *   * *   * *   * *   * * 
***** ***** ***** ***** ***** ***** ***** *****
   */